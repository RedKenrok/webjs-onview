define((function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var e=["","-enter","-enter-add","-enter-remove","-enter-toggle","-exit","-exit-add","-exit-remove","-exit-toggle"];function i(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";Array.prototype.forEach.call(e.split(r),(function(e){switch((e=e.trim())[0]){case"#":e=e.substring(1).replace(" ","-"),t.id=e;break;case".":e=e.substring(1).replace(" ","-"),t.classList.contains(e)||t.classList.add(e);break;case"[":i=e.substring(1,e.indexOf("=")),n=e.substring(i.length+2,e.length-1),i=i.replace(" ","-"),t.setAttribute(i,n)}}))}function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"context";return Function('"use strict"; return (function('+i+") { "+t+" });")()(e)}function r(t,e){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";Array.prototype.forEach.call(e.split(r),(function(e){switch((e=e.trim())[0]){case"#":e=e.substring(1).replace(" ","-"),t.removeAttribute(e);break;case".":e=e.substring(1).replace(" ","-"),t.classList.contains(e)&&t.classList.remove(e);break;case"[":(i=e.indexOf("="))<0&&(i=e.length-1),n=(n=e.substring(1,i)).replace(" ","-"),t.removeAttribute(n)}}))}function o(t,i,n,r){"false"===i.getAttribute(t._options.attributePrefix+"-repeat")&&(i.removeAttribute(r),e.filter((function(e){return i.hasAttribute(t._options.attributePrefix+e)})).length>0||(i.removeAttribute("data-onview-isintersecting"),n.unobserve(i)))}function s(t,e,s){e.forEach((function(e){var a=t._options,u=a.attributePrefix,c=a.eventContextName,l=a.splitCharacter,f=e.target,v="false"!==f.getAttribute(u+"isintersecting")!==e.isIntersecting;f.setAttribute(u+"isintersecting",e.isIntersecting.toString());var h,b,g=[];if((b=f.getAttribute(u))&&b.length>0){var p=b;g.push((function(){return n(p,{entry:e},c)}))}if(e.isIntersecting){if(h=u+"-enter",b=f.getAttribute(h)){var d=b;g.push((function(){return n(d,{entry:e},c)})),o(t,f,s,h)}if(h=u+"-enter-add",b=f.getAttribute(h)){var m=b;g.push((function(){return i(f,m,l)})),o(t,f,s,h)}if(h=u+"-enter-remove",b=f.getAttribute(h)){var y=b;g.push((function(){return r(f,y,l)})),o(t,f,s,h)}}if(h=u+"-enter-toggle",b=f.getAttribute(h))if(e.isIntersecting){var _=b;g.push((function(){return i(f,_,l)}))}else if(v){var A=b;g.push((function(){return r(f,A,l)}))}if(v&&!e.isIntersecting){if(h=u+"-exit",b=f.getAttribute(h)){var E=b;g.push((function(){return n(E,{entry:e},c)})),o(t,f,s,h)}if(h=u+"-exit-add",b=f.getAttribute(h)){var x=b;g.push((function(){return i(f,x,l)})),o(t,f,s,h)}if(h=u+"-exit-remove",b=f.getAttribute(h)){var w=b;g.push((function(){return r(f,w,l)})),o(t,f,s,h)}}if(h=u+"-exit-toggle",b=f.getAttribute(h))if(e.isIntersecting){var S=b;g.push((function(){return r(f,S,l)}))}else if(v){var k=b;g.push((function(){return i(f,k,l)}))}!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t.length<=0))if(e){var i=parseInt(e,10);i<=0?t.forEach((function(t){t()})):setTimeout((function(){t.forEach((function(t){t()}))}),i)}else t.forEach((function(t){t()}))}(g,f.getAttribute(u+"-delay")),"function"==typeof window.CustomEvent&&f.dispatchEvent(new CustomEvent("onview-change",{detail:{entry:e}}))}))}var a={complete:"complete",interactive:"interactive",never:"never"},u=function(){function i(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._initialized=!1,this._options={debug:!1,readyState:a.complete,observedElement:document.body,observerElement:null,observerMargin:"0px",attributePrefix:"data-onview",eventContextName:"detail",selectorSplitCharacter:","},t&&t!=={}&&(this._options=Object.assign(this._options,t)),this._options.readyState===a.interactive?"interactive"===document.readyState||"complete"===document.readyState?this.initialize():document.addEventListener("DOMContentLoaded",(function(){e.initialize()})):this._options.readyState===a.complete&&("complete"===document.readyState?this.initialize():window.addEventListener("load",(function(){e.initialize()})))}var n,r,o;return n=i,(r=[{key:"getOptions",value:function(){return Object.assign({},this._options)}},{key:"isInitialized",value:function(){return this._initialized}},{key:"initialize",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=Object.assign({threshold:0},{root:this._options.observerElement,rootMargin:this._options.observerMargin});this._observer=new IntersectionObserver((function(e,i){s(t,e,i)}),e),this.queryDocument()}}},{key:"destroy",value:function(){this._observer&&this._observer.disconnect(),this._observer=null,this._initialized=!1,this._options=null}},{key:"queryDocument",value:function(){var t=this,i=this._observer.takeRecords().map((function(t){return t.target})),n=e.map((function(e){return"["+t._options.attributePrefix+e+"]"})),r=this._options.observedElement.querySelectorAll(n.join(","));i.length>0?Array.prototype.forEach.call(r,(function(e){i.indexOf(e)>=0||t._observer.observe(e)})):Array.prototype.forEach.call(r,(function(e){t._observer.observe(e)}))}}])&&t(n.prototype,r),o&&t(n,o),i}();return u.READY_STATES=a,u.VERSION="1.0.5",u}));
